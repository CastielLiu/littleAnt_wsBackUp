<!-- -->
<launch>

	<arg name="base_control_port" default="/dev/U4"/>   <!--底层can分析仪-->
	<arg name="gps_port" default="/dev/ttyS2"/>		    <!-- GPS-->
	<arg name="stm32_port" default="/dev/U6"/>          <!-- STM32-->
	<arg name="file_name" default="path.txt" />
	
	<arg name="max_speed"  default="5.0"/>
	
	<!-- euclidean_cluster -->
	<include file="$(find euclidean_cluster)/launch/euclidean_cluster.launch"/>
	
	<!--避障-->	
	<node type="avoiding_node" pkg="avoiding"  name="avoiding_node" output="screen" >
		<param name="path_points_file" value="$(find recorder)/data/path_data/result/$(arg file_name)"/>
		<param name="utm_topic" value="/ll2utm_odom" />
		<param name="avoid_speed" value="10.0" />
		<param name="objects_topic" value="/detected_bounding_boxs" />
 		<param name="safety_distance_side" value="0.1"/>    <!--   两侧安全距离       -->
		<param name="max_deceleration" value="5.0" />
		<param name="maxOffset_left" value="-3.0"/>  <!-- 左右侧避障偏移最大值 -->
		<param name="maxOffset_right" value="0.0"/>
	</node>

	<!--底层 -->
	<node name="base_control" pkg="little_ant" type="base_control" output="screen">
		<param name ="obd_can_port_name" value="$(arg base_control_port)"/>
		<param name ="stm32_port_name" value="$(arg stm32_port)"/>
		<param name ="stm32_baudrate" value="115200"/>
		<param name ="max_steering_speed" value="2.0"/> <!--前后帧转角最大差值 -->
	</node>
	
	<!-- 跟踪   -->
	<node name="path_tracking_node" pkg="path_tracking" type="path_tracking_node" output="screen">
		<param name="path_points_file" value="$(find recorder)/data/path_data/result/$(arg file_name)"/>
		<param name="disThreshold" value="6.0"/>    			<!-- 跟踪前视距离  -->
		<param name="avoiding_disThreshold" value="15.0"/>		<!-- 跟踪前视距离  -->
		<param name="speed" value="20.0"/>						<!-- 跟踪速度  -->
		<param name="maxOffset_left" value="-0.0"/>  <!-- 左右侧避障偏移最大值 -->
		<param name="maxOffset_right" value="0.0"/>
		<param name="foreSightDis_speedCoefficient" value = "1.2"/>
		<param name="foreSightDis_latErrCoefficient" value = "0.5"/>
	</node>
	
	<node pkg="novatel" type="novatel_node" name="novatel_node"  >

		<param name="port" value="$(arg gps_port)" />
		<param name="baudrate" value="115200" />
		<param name="log_commands" value="inspvaxb ontime 0.05" />
		<param name="is_lltoutm"   value="true"/>
		<param name="ll2utm_topic" value="/ll2utm_odom"/>
		
	</node>
	
	<node name="esr_radar" pkg="esr_radar" type ="esr_radar" output="screen">
		<param name ="is_pubBoundingBox" type ="bool" value="True"/>
		<param name ="is_sendMsgToEsr"  type ="bool"  value="True"/>
		<param name ="in_port_name" value="/dev/U2"/>
		<param name ="out_port_name" value="/dev/U3"/>
	</node>
	
	<!-- acc -->
	<node name="acc_node" pkg="acc" type="acc_node" output="screen" respawn="true">
		<param name="target_search_angle_range" value="5.0"/>
		<param name="max_target_search_distance" value="30.0"/>
		
		<param name="max_following_speed" value="15.0"/>
		<param name="keeping_distance" value="13.0"/>
	</node>
	
	
	<node name="record_debug_path_node" pkg="recorder" type="record_path_node">
		<param name="file_path" value="$(find recorder)/data/path_data/debug/"/>
		<param name="file_name" value="$(arg file_name)"/>
		<param name="sample_distance" value="0.1" />
		<param name="utm_topic" value="/ll2utm_odom" />
	</node>

 <!--总决策-->
	<node  type="decision_making_node" pkg ="decision_making" name="decision_making_node" respawn="true">
		<param name ="traffic_mark_topic" value="/traffic_mark" />
	</node>  
	
	

</launch>



